{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst datePicker = document.querySelector('#datetime-picker');\nconst startButton = document.querySelector('.js-start-button');\nconst stopButton = document.querySelector('.js-stop-button');\nstartButton.setAttribute('disabled', true);\n\nconst data = [\n  document.querySelector('[data-days]'),\n  document.querySelector('[data-hours]'),\n  document.querySelector('[data-minutes]'),\n  document.querySelector('[data-seconds]')\n];\n\nlet userSelectedDate;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    if (selectedDates[0] < options.defaultDate) {\n      iziToast.error({\n        message: 'Please choose a date in the future',\n        closeOnEscape: true,\n        position: 'topRight'\n      });\n    }\n    else {\n      userSelectedDate = selectedDates[0].getTime();\n      startButton.removeAttribute('disabled');\n    }\n  },\n};\n\nflatpickr(datePicker, options);\n\nstartButton.addEventListener('click', handleTimerStart);\nstopButton.addEventListener('click', handleTimerStop);\n\nlet timerId;\n\nfunction handleTimerStart() {\n  stopButton.classList.toggle('is-hidden');\n\n\n   timerId = setInterval(() => {\n     const timeRemaining = Object.values(\n       convertMs(userSelectedDate - Date.now())\n     );\n\n     const allZero = timeRemaining.every(el => Number(el) < 0);\n\n     if (allZero) {\n       clearInterval(timerId);\n       startButton.removeAttribute('disabled');\n       return;\n     }\n\n     for (let i = 0; i < data.length; i++) {\n       data[i].textContent = timeRemaining[i];\n     }\n   }, 1000);\n\n  startButton.setAttribute('disabled', true);\n}\n\nfunction handleTimerStop() {\n  clearInterval(timerId);\n\n  for (let i = 0; i < data.length; i++) {\n    data[i].textContent = '00';\n  }\n\n  stopButton.classList.toggle('is-hidden');\n}\n\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day)\n    .toString()\n    .padStart(2, '0');\n  const hours = Math.floor((ms % day) / hour)\n    .toString()\n    .padStart(2, '0');\n  const minutes = Math.floor(((ms % day) % hour) / minute)\n    .toString()\n    .padStart(2, '0');\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second)\n    .toString()\n    .padStart(2, '0');\n\n  return { days, hours, minutes, seconds };\n}\n\n\n\n\n"],"names":["datePicker","startButton","stopButton","data","userSelectedDate","options","selectedDates","iziToast","flatpickr","handleTimerStart","handleTimerStop","timerId","timeRemaining","convertMs","el","i","ms","days","hours","minutes","seconds"],"mappings":"2GAMA,MAAMA,EAAa,SAAS,cAAc,kBAAkB,EACtDC,EAAc,SAAS,cAAc,kBAAkB,EACvDC,EAAa,SAAS,cAAc,iBAAiB,EAC3DD,EAAY,aAAa,WAAY,EAAI,EAEzC,MAAME,EAAO,CACX,SAAS,cAAc,aAAa,EACpC,SAAS,cAAc,cAAc,EACrC,SAAS,cAAc,gBAAgB,EACvC,SAAS,cAAc,gBAAgB,CACzC,EAEA,IAAIC,EAEJ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACjBA,EAAc,CAAC,EAAID,EAAQ,YAC7BE,EAAS,MAAM,CACb,QAAS,qCACT,cAAe,GACf,SAAU,UAClB,CAAO,GAGDH,EAAmBE,EAAc,CAAC,EAAE,QAAO,EAC3CL,EAAY,gBAAgB,UAAU,EAEzC,CACH,EAEAO,EAAUR,EAAYK,CAAO,EAE7BJ,EAAY,iBAAiB,QAASQ,CAAgB,EACtDP,EAAW,iBAAiB,QAASQ,CAAe,EAEpD,IAAIC,EAEJ,SAASF,GAAmB,CAC1BP,EAAW,UAAU,OAAO,WAAW,EAGtCS,EAAU,YAAY,IAAM,CAC1B,MAAMC,EAAgB,OAAO,OAC3BC,EAAUT,EAAmB,KAAK,KAAK,CAC9C,EAIK,GAFgBQ,EAAc,MAAME,GAAM,OAAOA,CAAE,EAAI,CAAC,EAE3C,CACX,cAAcH,CAAO,EACrBV,EAAY,gBAAgB,UAAU,EACtC,MACD,CAED,QAASc,EAAI,EAAGA,EAAIZ,EAAK,OAAQY,IAC/BZ,EAAKY,CAAC,EAAE,YAAcH,EAAcG,CAAC,CAExC,EAAE,GAAI,EAERd,EAAY,aAAa,WAAY,EAAI,CAC3C,CAEA,SAASS,GAAkB,CACzB,cAAcC,CAAO,EAErB,QAASI,EAAI,EAAGA,EAAIZ,EAAK,OAAQY,IAC/BZ,EAAKY,CAAC,EAAE,YAAc,KAGxBb,EAAW,UAAU,OAAO,WAAW,CACzC,CAGA,SAASW,EAAUG,EAAI,CAMrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC7B,SAAU,EACV,SAAS,EAAG,GAAG,EACZE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACvC,SAAU,EACV,SAAS,EAAG,GAAG,EACZG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACpD,SAAU,EACV,SAAS,EAAG,GAAG,EACZI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAC/D,SAAU,EACV,SAAS,EAAG,GAAG,EAElB,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}